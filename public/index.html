<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buscador de Equival√™ncias OEM</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
}
.container {
    max-width: 900px;
    margin: auto;
}
h1 {
    color: #222;
}
.search-box {
    background: #fff;
    padding: 20px;
    border-radius: 6px;
    box-shadow: 0 2px 6px rgba(0,0,0,.1);
    margin-bottom: 20px;
}
label {
    font-weight: bold;
}
input {
    width: 100%;
    padding: 10px;
    margin: 8px 0 15px;
    border-radius: 4px;
    border: 1px solid #ccc;
}
button {
    background: #0056b3;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
button:hover {
    background: #003f88;
}
.result {
    background: #fff;
    padding: 15px;
    border-radius: 6px;
    margin-bottom: 12px;
    box-shadow: 0 1px 4px rgba(0,0,0,.1);
}
.codigo {
    font-weight: bold;
    font-size: 16px;
}
.badge {
    display: inline-block;
    padding: 4px 8px;
    font-size: 12px;
    border-radius: 4px;
    margin-top: 5px;
}
.badge.pdf {
    background: #dc3545;
    color: #fff;
}
.badge.html {
    background: #198754;
    color: #fff;
}
.site {
    font-size: 12px;
    color: #555;
}
a {
    color: #0056b3;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}
</style>
</head>

<body>
<div class="container">
    <h1>Buscador de Equival√™ncias OEM</h1>

    <div class="search-box">
        <label>Refer√™ncia</label>
        <input id="ref" placeholder="Ex: 2S0145863">

        <label>Marca / Informa√ß√£o complementar</label>
        <input id="marca" placeholder="Ex: Volkswagen">

        <button onclick="buscar()">Buscar</button>
    </div>

    <div id="resultados"></div>
</div>

<script>
async function buscar() {
    const ref = document.getElementById("ref").value.trim();
    const marca = document.getElementById("marca").value.trim();
    const resultadosDiv = document.getElementById("resultados");

    resultadosDiv.innerHTML = "üîé Buscando...";

    if (!ref) {
        alert("Informe a refer√™ncia");
        return;
    }

    const response = await fetch(`/api/buscar?referencia=${encodeURIComponent(ref)}&marca=${encodeURIComponent(marca)}`);
    const data = await response.json();

    resultadosDiv.innerHTML = "";

    if (!data.resultados || data.resultados.length === 0) {
        resultadosDiv.innerHTML = "<p>Nenhuma equival√™ncia encontrada.</p>";
        return;
    }

    data.resultados.forEach(r => {
        const div = document.createElement("div");
        div.className = "result";

        div.innerHTML = `
            <div class="codigo">üî¢ ${r.codigo}</div>
            <div>üè∑Ô∏è ${r.descricao || "Descri√ß√£o n√£o dispon√≠vel"}</div>
            <span class="badge ${r.tipo === "PDF" ? "pdf" : "html"}">
                ${r.tipo === "PDF" ? "üìÑ Ficha t√©cnica (PDF)" : "üåê P√°gina Web"}
            </span><br><br>
            <a href="${r.link}" target="_blank">üîó Acessar documento</a><br>
            <span class="site">${r.site}</span>
        `;

        resultadosDiv.appendChild(div);
    });
}
</script>
</body>
</html>
